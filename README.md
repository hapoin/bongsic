/*
# bongsic
# bongsic is my puppy
  9x9 matrix display for uno

*/

const int col[9] = {10, 9, 8, 7, 6, 5, 4, 3, 2};
const int row[9] = {13, 14, 15, 16, 17, 18, 19, 11, 12}; // 13, 15,16,17 = A0  A3

int m_pattern = 24;  // number of pattern
int dly = 50;

unsigned int layerPattern[24][9] = {
  // Terasystem
  {0x0FF, 0x0FF, 0x018, 0x018, 0x018, 0x018, 0x018, 0x018, 0x018}, // pattern T
  {0x000, 0x0FF, 0x0FF, 0x0C3, 0x0FF, 0x0FF, 0x0C0, 0x0FF, 0x07F}, // pattern e
  {0x000, 0x07F, 0x0FF, 0x0C0, 0x0C0, 0x0C0, 0x0C0, 0x0C0, 0x0C0}, // pattern r
  {0x000, 0x0FF, 0x0FF, 0x003, 0x0FF, 0x0FF, 0x0C3, 0x0FF, 0x07F}, // pattern a
  {0x0FF, 0x0FF, 0x0C0, 0x0C0, 0x0FF, 0x0FF, 0x003, 0x0FF, 0x0FE}, // pattern S
  {0x000, 0x0C3, 0x0C3, 0x0C3, 0x0C3, 0x0FF, 0x03F, 0x003, 0x003}, // pattern y
  {0x000, 0x0FF, 0x0FF, 0x0C0, 0x0FF, 0x0FF, 0x003, 0x0FF, 0x0FE}, // pattern s
  {0x018, 0x0FF, 0x0FF, 0x018, 0x018, 0x018, 0x018, 0x018, 0x018}, // pattern t
  {0x000, 0x0FF, 0x0FF, 0x0C3, 0x0FF, 0x0FF, 0x0C0, 0x0FF, 0x07F}, // pattern e
  {0x000, 0x0FE, 0x0FF, 0x0DB, 0x0DB, 0x0DB, 0x0DB, 0x0DB, 0x0DB}, // pattern m
  {0x000, 0x000, 0x050, 0x0F8, 0x0F8, 0x070, 0x020, 0x000, 0x000}, // pattern 11
  {0x0D8, 0x1FC, 0x1FC, 0x1FC, 0x0F8, 0x070, 0x020, 0x000, 0x000}, // pattern 12
  {0x0FE, 0x0FE, 0x0FE, 0x07C, 0x038, 0x010, 0x000, 0x000, 0x000}, // pattern 13
  {0x03F, 0x03F, 0x01F, 0x00E, 0x004, 0x000, 0x000, 0x000, 0x000}, // pattern 14
  {0x01F, 0x01F, 0x01F, 0x00F, 0x007, 0x002, 0x000, 0x000, 0x000}, // pattern 15
  {0x00E, 0x01F, 0x01F, 0x01F, 0x01F, 0x00F, 0x007, 0x003, 0x001}, // pattern 16
  {0x01D, 0x03F, 0x03F, 0x03F, 0x03F, 0x01F, 0x00F, 0x007, 0x003}, // pattern 17
  {0x000, 0x03B, 0x07F, 0x07F, 0x07F, 0x07F, 0x03F, 0x01F, 0x007}, // pattern 18
  {0x000, 0x000, 0x077, 0x0FF, 0x0FF, 0x0FF, 0x0FF, 0x07F, 0x03F}, // pattern 19
  {0x000, 0x000, 0x0EE, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x0FE, 0x07C}, // pattern 20
  {0x000, 0x0EE, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x0FE, 0x07C}, // pattern 21
  {0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF}, // pattern 22
  {0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155}, // pattern 23
  {0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA} // pattern 24

  // Kim doo ho
  /*
    {0x082, 0x084, 0x088, 0x090, 0x0E0, 0x090, 0x088, 0x084, 0x082}, // pattern K
    {0x000, 0x000, 0x010, 0x000, 0x010, 0x010, 0x010, 0x010, 0x010}, // pattern i
    {0x000, 0x000, 0x000, 0x000, 0x0EC, 0x092, 0x092, 0x092, 0x092}, // pattern m
    {0x000, 0x000, 0x004, 0x004, 0x03C, 0x044, 0x044, 0x044, 0x03C}, // pattern d
    {0x000, 0x000, 0x000, 0x000, 0x038, 0x044, 0x044, 0x044, 0x038}, // pattern o
    {0x000, 0x000, 0x000, 0x000, 0x038, 0x044, 0x044, 0x044, 0x038}, // pattern o
    {0x000, 0x000, 0x040, 0x040, 0x078, 0x044, 0x044, 0x044, 0x044}, // pattern h
    {0x000, 0x000, 0x000, 0x000, 0x038, 0x044, 0x044, 0x044, 0x038}, // pattern h
    {0x000, 0x000, 0x000, 0x000, 0x000, 0x000, 0x006, 0x006, 0x000}, // pattern 8
    {0x000, 0x000, 0x000, 0x000, 0x01C, 0x01C, 0x008, 0x000, 0x000}, // pattern 9
    {0x000, 0x000, 0x000, 0x028, 0x07C, 0x07C, 0x038, 0x010, 0x000}, // pattern 10
    {0x000, 0x000, 0x050, 0x0F8, 0x0F8, 0x070, 0x020, 0x000, 0x000}, // pattern 11
    {0x0D8, 0x1FC, 0x1FC, 0x1FC, 0x0F8, 0x070, 0x020, 0x000, 0x000}, // pattern 12
    {0x0FE, 0x0FE, 0x0FE, 0x07C, 0x038, 0x010, 0x000, 0x000, 0x000}, // pattern 13
    {0x03F, 0x03F, 0x01F, 0x00E, 0x004, 0x000, 0x000, 0x000, 0x000}, // pattern 14
    {0x01F, 0x01F, 0x01F, 0x00F, 0x007, 0x002, 0x000, 0x000, 0x000}, // pattern 15
    {0x00E, 0x01F, 0x01F, 0x01F, 0x01F, 0x00F, 0x007, 0x003, 0x001}, // pattern 16
    {0x01D, 0x03F, 0x03F, 0x03F, 0x03F, 0x01F, 0x00F, 0x007, 0x003}, // pattern 17
    {0x000, 0x03B, 0x07F, 0x07F, 0x07F, 0x07F, 0x03F, 0x01F, 0x007}, // pattern 18
    {0x000, 0x000, 0x077, 0x0FF, 0x0FF, 0x0FF, 0x0FF, 0x07F, 0x03F}, // pattern 19
    {0x000, 0x000, 0x0EE, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x0FE, 0x07C}, // pattern 20
    {0x000, 0x0EE, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x0FE, 0x07C}, // pattern 21
    {0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF, 0x1FF}, // pattern 22
    {0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155}, // pattern 23
    {0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA, 0x155, 0x0AA} // pattern 24
  */
};

void setup()
{
  for (int i = 0; i < 9; i++) {
    pinMode(row[i], OUTPUT);
    pinMode(col[i], OUTPUT);
    digitalWrite(row[i], HIGH);
    digitalWrite(col[i], LOW);
  }

}
void loop()
{
  for (int i = 0; i <  m_pattern; i++) {     //순차적으로 패턴수만큼 동작
    for (int j = 0; j < dly; j++) {          //delay 시간만큼 해당 패턴을 유지한다.
      for (int p = 0; p < 9; p++) {
        LEDSetting(row[p], layerPattern[i][p]);
      }
    }
    delay(1);                                // Time of pattern term
  }
}
void LEDSetting(int row, unsigned int state) {
  digitalWrite(row, LOW);
  for (int i = 0; i < 9; i++) {
    digitalWrite(col[i], bitRead(state, i));
  }
  delay(1);
  for (int i = 0; i < 9; i++) {
    digitalWrite(col[i], LOW);
  }
  digitalWrite(row, HIGH);
}
